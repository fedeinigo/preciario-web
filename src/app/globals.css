@tailwind base;
@tailwind components;
@tailwind utilities;

/* ================================
   BASE THEME — morado marca
   ================================ */
@layer base {
  :root {
    --bg: 246 246 247;        /* #F6F6F7 */
    --paper: 255 255 255;     /* #FFFFFF */
    --ink: 17 24 39;          /* slate-900 */
    --muted: 107 114 128;     /* slate-500 */
    --border: 226 232 240;    /* slate-200 */

    /* Paleta principal morada */
    --primary: 59 10 105;           /* #3B0A69 */
    --primary-ink: 255 255 255;     /* texto sobre morado */
    --primary-soft: 237 233 254;    /* #EDE9FE (violet-100) */

    /* Acento (botones pill de acción) */
    --accent: 34 211 238;           /* cyan-400 */
    --accent-ink: 43 11 87;         /* #2B0B57 */

    --shadow: 0 1px 2px rgba(15, 23, 42, 0.06), 0 8px 20px rgba(15, 23, 42, 0.04);
    --radius: 6px;

    /* tamaños */
    --fs-h1: 24px;
    --fs-h2: 20px;
    --fs-h3: 16px;
    --fs-body: 14px;
    --fs-xs: 12px;

    --lh-tight: 1.2;
    --lh-body: 1.5;

    /* alturas fijas para layout */
    --nav-h: 48px;
    --footer-h: 40px;

    /* gradiente marca (navbar / headings / tablas) */
     --brand-start-hex: #4c1d95; /* violeta claro - igual a Objetivos */
    --brand-end-hex:   #4c1d95; /* violeta profundo - igual a Objetivos */
  }

  html,
  body {
    background-color: rgb(var(--bg));
    color: rgb(var(--ink));
    font-size: var(--fs-body);
    line-height: var(--lh-body);
    overflow-x: hidden;
  }

  h1 { font-size: var(--fs-h1); line-height: var(--lh-tight); font-weight: 700; }
  h2 { font-size: var(--fs-h2); line-height: var(--lh-tight); font-weight: 700; }
  h3 { font-size: var(--fs-h3); line-height: var(--lh-tight); font-weight: 600; }

  ::-webkit-scrollbar { width: 10px; height: 10px; }
  ::-webkit-scrollbar-thumb { background: rgb(var(--border)); border-radius: 8px; }
  ::-webkit-scrollbar-track { background: transparent; }
}

html.mapache-theme,
body.mapache-theme {
  --bg: 244 247 255;
  --paper: 255 255 255;
  --ink: 15 23 42;
  --muted: 99 102 128;
  --border: 223 230 241;
  --primary: 76 29 149;
  --primary-ink: 255 255 255;
  --primary-soft: 229 231 255;
  --accent: 59 130 246;
  --accent-ink: 15 23 42;
  --brand-start-hex: #ede9fe;
  --brand-end-hex: #dbeafe;
  --mapache-surface-muted: 248 250 255;
  --mapache-border-strong: 203 213 225;
  --mapache-shadow-soft: 0 22px 45px rgba(15, 23, 42, 0.08);
  --mapache-shadow-strong: 0 32px 70px rgba(15, 23, 42, 0.12);
  color-scheme: light;

  background-color: rgb(var(--bg));
  color: rgb(var(--ink));
}

html.mapache-theme body {
  background-image: linear-gradient(180deg, rgba(237, 233, 254, 0.65) 0%, rgba(226, 232, 240, 0.55) 35%, rgba(248, 250, 255, 1)
      100%);
  background-attachment: fixed;
  background-color: rgb(var(--bg));
  color: rgb(var(--ink));
}

html.mapache-theme body .card,
body.mapache-theme .card {
  background-color: rgb(var(--paper));
  border-color: rgb(var(--border));
  box-shadow: var(--mapache-shadow-soft);
  color: rgb(var(--ink));
}

html.mapache-theme body .table-th,
body.mapache-theme .table-th {
  background: linear-gradient(135deg, rgba(124, 58, 237, 0.12), rgba(79, 70, 229, 0.08));
  border-color: rgba(148, 163, 184, 0.45);
  color: rgb(51, 65, 85);
}

html.mapache-theme body .table-td,
body.mapache-theme .table-td {
  border-color: rgba(203, 213, 225, 0.65);
  background-color: rgba(248, 250, 255, 0.75);
  color: inherit;
}

html.mapache-theme body .navbar,
body.mapache-theme .navbar {
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.85), rgba(226, 232, 240, 0.85));
  color: rgb(var(--ink));
  box-shadow: 0 18px 40px rgba(148, 163, 184, 0.18);
  border-bottom: 1px solid rgba(203, 213, 225, 0.7);
}

html.mapache-theme body .navbar .btn,
html.mapache-theme body .navbar .btn-ghost,
body.mapache-theme .navbar .btn,
body.mapache-theme .navbar .btn-ghost {
  background-color: rgba(255, 255, 255, 0.9);
  border-color: rgba(226, 232, 240, 1);
  color: rgb(var(--ink));
}

html.mapache-theme body .navbar .btn:hover,
html.mapache-theme body .navbar .btn-ghost:hover,
body.mapache-theme .navbar .btn:hover,
body.mapache-theme .navbar .btn-ghost:hover {
  background-color: rgba(226, 232, 240, 0.8);
}

html.mapache-theme body .chip,
body.mapache-theme .chip {
  background-color: rgba(237, 233, 254, 0.9);
  color: rgb(88, 28, 135);
}

html.mapache-theme body,
body.mapache-theme {
  --mapache-surface-strong: 255 255 255;
}

/*
 * Mapache portal legacy class overrides
 * -------------------------------------
 * El portal Mapache utiliza utilidades pensadas para un modo oscuro.
 * Los siguientes overrides reinterpretan esos estilos dentro de la
 * nueva estética clara sin modificar los componentes de React.
 */
html.mapache-theme body .bg-slate-950\/60,
html.mapache-theme body .bg-slate-950\/70,
html.mapache-theme body .bg-slate-950\/80,
html.mapache-theme body .bg-slate-950\/85,
html.mapache-theme body .bg-slate-950\/95,
html.mapache-theme body .\!bg-slate-950\/95,
html.mapache-theme body .bg-slate-900\/70 {
  background-color: rgb(var(--paper)) !important;
  color: rgb(var(--ink)) !important;
  box-shadow: var(--mapache-shadow-soft);
}

html.mapache-theme body .bg-black\/20,
html.mapache-theme body .bg-white\/5,
html.mapache-theme body .bg-white\/10,
html.mapache-theme body .bg-white\/15,
html.mapache-theme body .bg-white\/20,
html.mapache-theme body .bg-white\/30,
html.mapache-theme body .bg-white\/60,
html.mapache-theme body .bg-white\/70 {
  background-color: rgb(var(--mapache-surface-muted) / 0.75) !important;
  color: rgb(var(--ink)) !important;
  box-shadow: inset 0 0 0 1px rgb(var(--mapache-border-strong) / 0.25);
}

html.mapache-theme body .border-white\/10,
html.mapache-theme body .border-white\/15,
html.mapache-theme body .border-white\/20,
html.mapache-theme body .border-white\/25,
html.mapache-theme body .border-white\/30,
html.mapache-theme body .border-white\/40,
html.mapache-theme body .border-white\/60,
html.mapache-theme body .\!border-white\/10 {
  border-color: rgb(var(--mapache-border-strong)) !important;
}

html.mapache-theme body .ring-white\/30,
html.mapache-theme body .ring-white\/40,
html.mapache-theme body .ring-white\/60,
html.mapache-theme body .focus\:ring-white\/40,
html.mapache-theme body .focus\:ring-white\/60,
html.mapache-theme body .focus-visible\:ring-white\/30,
html.mapache-theme body .focus-visible\:ring-white\/40,
html.mapache-theme body .focus-visible\:ring-white\/60 {
  --tw-ring-color: rgba(79, 70, 229, 0.2) !important;
}

html.mapache-theme body .placeholder\:text-white\/40::placeholder,
html.mapache-theme body .placeholder\:text-white\/40::-moz-placeholder {
  color: rgba(100, 116, 139, 0.85) !important;
}

html.mapache-theme body .text-white,
html.mapache-theme body .text-white\/90 {
  color: rgb(var(--ink)) !important;
}

html.mapache-theme body .text-white\/80,
html.mapache-theme body .text-white\/70 {
  color: rgb(51, 65, 85) !important;
}

html.mapache-theme body .text-white\/60,
html.mapache-theme body .text-white\/55,
html.mapache-theme body .text-white\/50,
html.mapache-theme body .text-white\/40,
html.mapache-theme body .text-white\/30 {
  color: rgb(100, 116, 139) !important;
}

html.mapache-theme body .text-white\/20,
html.mapache-theme body .text-white\/15 {
  color: rgba(148, 163, 184, 0.9) !important;
}

html.mapache-theme body .bg-rose-500\/10,
html.mapache-theme body .bg-rose-500\/20 {
  background-color: rgba(254, 226, 226, 0.9) !important;
  color: rgb(190, 18, 60) !important;
}

html.mapache-theme body .text-rose-100,
html.mapache-theme body .text-rose-100\/80,
html.mapache-theme body .text-rose-300 {
  color: rgb(190, 18, 60) !important;
}

html.mapache-theme body .bg-cyan-500\/10,
html.mapache-theme body .bg-emerald-500\/10,
html.mapache-theme body .bg-emerald-400\/10,
html.mapache-theme body .bg-amber-400\/10,
html.mapache-theme body .bg-emerald-400,
html.mapache-theme body .bg-emerald-300,
html.mapache-theme body .bg-amber-300,
html.mapache-theme body .bg-amber-400 {
  background-color: rgba(226, 232, 240, 0.6) !important;
  color: rgb(30, 64, 175) !important;
}

html.mapache-theme body .hover\:bg-white\/10:hover,
html.mapache-theme body .hover\:bg-white\/20:hover,
html.mapache-theme body .hover\:bg-white\/25:hover {
  background-color: rgb(var(--mapache-surface-muted) / 0.95) !important;
  color: rgb(var(--ink)) !important;
}

html.mapache-theme body .bg-rose-500,
html.mapache-theme body .bg-\[rgb\(var\(--primary\)\)\] {
  background-color: rgb(var(--primary)) !important;
  color: rgb(var(--primary-ink)) !important;
  box-shadow: 0 12px 25px rgba(79, 70, 229, 0.25);
}

html.mapache-theme body .bg-\[rgb\(var\(--primary\)\)\] .text-white,
html.mapache-theme body .bg-rose-500 .text-white,
html.mapache-theme body .bg-\[rgb\(var\(--primary\)\)\].text-white,
html.mapache-theme body .bg-rose-500.text-white {
  color: rgb(var(--primary-ink)) !important;
}

html.mapache-theme body .backdrop-blur-sm {
  background-color: rgba(255, 255, 255, 0.8) !important;
}

html.mapache-theme body .\!bg-slate-950\/85 {
  background-color: rgba(15, 23, 42, 0.25) !important;
}

html.mapache-theme body .text-white\/80 strong,
html.mapache-theme body .text-white strong {
  color: rgb(var(--ink)) !important;
}

/* ================================
   COMPONENTS
   ================================ */
@layer components {
  /* --- tarjetas base --- */
  .card {
    @apply rounded-[var(--radius)] shadow-[var(--shadow)] px-4 py-3 border;
    background-color: rgb(var(--paper));
    border-color: rgb(var(--border));
  }
  .shadow-soft { box-shadow: var(--shadow); }

  /* --- inputs --- */
  .input, .select, .textarea {
    @apply w-full rounded-[var(--radius)] px-3 py-2 text-[13.5px] outline-none;
    background-color: #fff;
    border: 1px solid rgb(var(--border));
    color: rgb(var(--ink));
  }
  .input::placeholder, .textarea::placeholder { color: rgb(var(--muted)); }
  .input:focus, .select:focus, .textarea:focus {
    border-color: rgb(var(--primary));
    box-shadow: 0 0 0 3px rgba(var(--primary), 0.12);
  }

  /* variantes pill para inputs/selects */
  .input-pill, .select-pill {
    @apply h-10 px-4 rounded-full border;
    background-color: #fff;
    border-color: rgb(var(--border));
    color: rgb(var(--ink));
  }
  .input-pill::placeholder { color: rgb(var(--muted)); }
  .select-on-dark {
    @apply h-10 px-4 rounded-full border;
    border-color: rgba(255,255,255,.6);
    background-color: rgba(255,255,255,.15);
    color: #fff;
  }

  /* --- botones --- */
  .btn {
    @apply inline-flex items-center justify-center gap-2
           rounded-[var(--radius)] px-3 py-2 text-[13.5px] font-medium select-none
           border transition;
    border-color: rgb(var(--border));
    transition: background-color .15s ease, color .15s ease, border-color .15s ease, box-shadow .15s ease;
  }
  .btn-primary {
    @apply btn;
    background-color: rgb(var(--primary));
    color: rgb(var(--primary-ink));
    border-color: transparent;
  }
  .btn-primary:hover { filter: brightness(0.95); }

  .btn-ghost {
    @apply btn;
    background-color: #fff;
    color: rgb(var(--ink));
    border-color: rgb(var(--border));
  }
  .btn-ghost:hover { border-color: rgb(var(--ink)); }

  /* --- data grid --- */
  .data-grid-menu {
    @apply rounded-lg border border-white/10 bg-slate-950/95 p-3 text-sm text-white shadow-soft backdrop-blur;
  }
  .data-grid-menu label {
    @apply flex items-center justify-between gap-3 rounded-md px-2 py-1 text-xs text-white/80 transition hover:bg-white/5;
  }
  .data-grid-menu button {
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-white/30;
  }

  /* botón acento (cian) – “Editar/Guardar objetivo”, “Perfil”, “Editar”, “Limpiar” */
  .btn-accent {
    @apply inline-flex items-center justify-center gap-2 font-semibold;
    height: 40px; padding: 0 20px;
    border-radius: 9999px;
    background-color: rgb(var(--accent));
    color: rgb(var(--accent-ink));
    box-shadow: 0 4px 10px rgba(34, 211, 238, .25);
  }
  .btn-accent:hover { filter: brightness(0.96); }
  .btn-round { border-radius: 9999px; }

.btn-bar {
  @apply inline-flex items-center justify-center gap-2 h-8 px-3 rounded-full text-[12px] font-medium border;
  background-color: #4c1d95;            /* violeta "aguado" como Objetivos */
  color: #fff;
  border-color: rgba(255, 255, 255, .35);
  transition: background-color .15s ease, box-shadow .15s ease;
}
.btn-bar:hover { background-color: #5b21b6; }  /* un paso más intenso */

  /* --- Tabs --- */
  .tab {
    @apply inline-flex items-center gap-2 px-3 py-2 rounded-[var(--radius)] border text-[13.5px];
  }
  .tab-active {
    background-color: rgb(var(--primary));
    color: rgb(var(--primary-ink));
    border-color: transparent;
  }
  .tab-inactive {
    background-color: #fff;
    color: rgb(var(--ink));
    border-color: rgb(var(--border));
  }

  /* --- Encabezados / barras moradas --- */
  .heading-bar {
    @apply text-white font-semibold text-lg px-4 py-2 rounded-[var(--radius)]
           shadow-[var(--shadow)] flex items-center justify-between;
    background: linear-gradient(90deg, var(--brand-start-hex), var(--brand-end-hex));
  }
  .heading-bar-sm {
    @apply text-white font-medium text-base px-3 py-1.5 rounded-[var(--radius)]
           shadow-[var(--shadow)] flex items-center justify-between;
    background: linear-gradient(90deg, var(--brand-start-hex), var(--brand-end-hex));
  }

  /* Header full-bleed para tablas/secciones */
  .section-header {
    @apply px-4 h-12 flex items-center text-white font-semibold;
    background: linear-gradient(90deg, var(--brand-start-hex), var(--brand-end-hex));
  }

  /* --- KPIs violeta (igual Objetivos) --- */
  .kpi-tile {
    @apply rounded-2xl px-4 py-3 text-white ring-1 ring-white/10;
    background: linear-gradient(135deg, #6d28d9 0%, #4c1d95 100%);
    box-shadow: 0 10px 24px rgba(76,29,149,.20);
  }
  .kpi-tile .kpi-label { font-size: 12px; opacity: .9; }
  .kpi-tile .kpi-value { font-size: 22px; font-weight: 800; }

  /* --- Tablas --- */
  .table-th {
    @apply text-left text-[12px] uppercase tracking-wide text-white border-b px-3 py-2;
    border-color: rgba(255,255,255,0.1);
    background: linear-gradient(90deg, var(--brand-start-hex), var(--brand-end-hex));
  }
  .table-td {
    @apply px-3 py-2 border-b align-middle;
    border-color: rgb(var(--border));
  }

  /* --- Navbar / Footer --- */
  .navbar {
    @apply w-full;
    color: rgb(var(--primary-ink)); /* <- FIX: sin clase arbitraria */
    background: linear-gradient(90deg, var(--brand-start-hex), var(--brand-end-hex));
  }
  .navbar-inner { @apply w-full h-full flex items-center justify-between; }

  .footer {
    @apply w-full;
    color: rgb(var(--primary-ink));
    background: linear-gradient(90deg, var(--brand-start-hex), var(--brand-end-hex));
  }
  .footer-inner {
    @apply w-full px-3 py-3 text-[13px] flex flex-col sm:flex-row items-center justify-between gap-2;
  }

  .modal-panel {
    @apply rounded-[var(--radius)] p-4 w-full max-w-lg border;
    background-color: #fff;
    border-color: rgb(var(--border));
    box-shadow: var(--shadow);
  }
}

/* ================================
   UTILIDADES
   ================================ */
@layer utilities {
  .text-muted { color: rgb(var(--muted)); }
  .chip {
    @apply inline-flex items-center rounded-[var(--radius)] text-[12px] px-2 py-1;
    background-color: rgb(var(--primary-soft));
  }

  /* textura “grain” sutil para superficies */
  .bg-grain-soft {
    background-color: #f8f5ff;
    background-image:
      radial-gradient( rgba(76,29,149,0.06) 1px, transparent 1px ),
      radial-gradient( rgba(76,29,149,0.04) 1px, transparent 1px );
    background-size: 16px 16px, 24px 24px;
    background-position: 0 0, 8px 8px;
  }

  /* anillo de foco con color de marca */
  .ring-brand { box-shadow: 0 0 0 3px rgba(76,29,149,.16); }
}

/* botones icono auxiliares */
.btn-warning-icon { @apply inline-flex items-center justify-center w-8 h-8 rounded-full text-white transition shadow-sm; background-color: #f59e0b; }
.btn-warning-icon:hover { background-color: #d97706; }
.btn-danger-icon  { @apply inline-flex items-center justify-center w-8 h-8 rounded-full text-white transition shadow-sm; background-color: #dc2626; }
.btn-danger-icon:hover { background-color: #b91c1c; }

/* --- HERO / LOGIN (fondos marketing) --- */
.hero-bg {
  position: relative;
  overflow-x: clip;
  isolation: isolate;
}
.hero-bg::before {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -3;
  background:
    radial-gradient(1400px 800px at -10% -10%, rgba(167, 139, 250, 0.20), transparent 60%),
    radial-gradient(1200px 700px at 110% 120%, rgba(99, 102, 241, 0.16), transparent 60%),
    radial-gradient(2000px 1200px at 50% -15%, rgba(139, 92, 246, 0.10), transparent 65%),
    linear-gradient(180deg, #3b0a69 0%, #2a0f5c 38%, #1c1347 72%, #0f0a2b 100%);
}
.hero-bg::after {
  content: "";
  position: fixed;
  inset: -15%;
  z-index: -2;
  pointer-events: none;
  mix-blend-mode: overlay;
  opacity: 0.25;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='140' height='140' viewBox='0 0 140 140'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='2' stitchTiles='stitch'/></filter><rect width='100%%' height='100%%' filter='url(%23n)' opacity='0.12'/></svg>");
  background-size: 280px 280px;
}
.hero-bg > .vignette,
.hero-bg .vignette {
  position: fixed;
  inset: 0;
  z-index: -1;
  pointer-events: none;
  background:
    radial-gradient(1200px 600px at 50% 20%, rgba(0,0,0,0.06), transparent 60%),
    radial-gradient(1200px 900px at 50% 80%, rgba(0,0,0,0.06), transparent 65%);
}

/* tarjeta de login (tamaños cómodos) */
.auth-card { max-width: 720px; }

